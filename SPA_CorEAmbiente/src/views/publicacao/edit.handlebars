{{!-- edit.handlebars --}}

{{!-- Seção de conteúdo da página --}}
<div class="container mt-4 w-80">
    <h1 class="mb-4">Editar Publicação</h1>
    <form id="editPublicacaoForm" enctype="multipart/form-data" method="post">
        <div class="form-group mb-3">
            <label for="editTitulo">Título</label>
            <input type="text" class="form-control" id="editTitulo" name="titulo" value="{{publicacao.titulo}}" required>
        </div>
        
        <div class="form-group mb-3">
            <label for="editConteudo">Conteúdo</label>
            <textarea class="form-control" id="editConteudo" name="conteudo" rows="5" required>{{publicacao.conteudo}}</textarea>
        </div>

        <div class="form-group mb-3">
            <label for="editImagemPrincipal">Imagem Principal</label>
            <input type="file" class="form-control-file" id="editImagemPrincipal" name="imagem_principal">
            <small class="form-text text-muted">Deixe em branco para manter a imagem atual.</small>
            <!-- Preview of current main image -->
            <img src="http://localhost:3000/img/publicacoes/{{publicacao.imagem_principal}}" class="img-thumbnail mt-2" alt="Imagem Principal">
        </div>

        <div class="form-group mb-3">
            <label for="editImagensInternas">Imagens Internas</label>
            <input type="file" class="form-control-file" id="editImagensInternas" name="imagens_internas" multiple>
            <small class="form-text text-muted">Deixe em branco para manter as imagens atuais.</small>
            <!-- Previews of current internal images -->
            <div class="mt-2">
                {{#each publicacao.imagens_internas}}
                <img src="http://localhost:3000/img/publicacoes/{{this}}" class="img-thumbnail mr-2 mb-2" alt="Imagem Interna" style="max-width: 150px;">
                {{/each}}
            </div>
        </div>

        <!-- Campo oculto para armazenar o ID da publicacao -->
        <input type="hidden" id="editPublicacaoId" name="id" value="{{publicacao.id}}">
        <a href="../publicacoes/" class="btn btn-secondary" id="cancelEditPublicacao"><i class="bi bi-x-circle"></i> Cancelar</a>
        <button type="button" class="btn btn-primary" id="saveEditPublicacao" onclick="UpdatePublicacaoClick(event)"><i class="bi bi-check-circle"></i> Salvar</button>
    </form>
</div>

<!-- Scripts do formulário publicacao -->
<script src="../js/publicacaoScripts.js"></script>
